<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Pembelahan Sel (Final)</title>
    <style>
        /* ==================== A. Tampilan Dasar & Latar Belakang ==================== */
        body {
            font-family: Arial, sans-serif; 
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            /* Latar Belakang: Hijau Pastel Mint */
            background-color: #d8f3dc; 
            color: #38a3a5; /* Warna Teks Utama (Hijau Tua Pastel) */
        }
        
        /* ==================== B. Kotak Game Utama ==================== */
        .quiz-container {
            background-color: #ffffff; /* Putih bersih */
            padding: 35px;
            border-radius: 20px;
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.2); 
            width: 90%;
            max-width: 750px; 
            text-align: center;
        }

        /* ==================== C. Gaya Judul & Input Nama ==================== */
        h1 {
            color: #22577a; /* Biru Tua Pastel */
            margin-bottom: 5px;
            font-family: inherit;
        }
        p {
            color: #57cc99; /* Hijau Terang Pastel */
            font-size: 1.1em;
            margin-bottom: 25px;
        }
        
        /* Gaya untuk Input Nama (Start Screen) */
        #name-input {
            padding: 10px;
            width: 70%;
            max-width: 300px;
            border: 2px solid #57cc99;
            border-radius: 8px;
            margin-bottom: 15px;
            font-family: inherit;
        }
        #start-button {
            background-color: #38a3a5; /* Hijau Laut Pastel */
            color: white;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            border: none;
            transition: background-color 0.3s;
            font-family: inherit;
            margin-bottom: 15px; /* Tambahan Jarak */
        }
        #start-button:hover {
            background-color: #2a7374;
        }
        
        /* Gaya Tombol View Ranking */
        #view-ranking-button {
            background-color: #e63946; /* Merah Pastel */
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95em;
            border: none;
            transition: background-color 0.3s;
            font-family: inherit;
        }
        #view-ranking-button:hover {
            background-color: #c9323c;
        }


        /* ==================== D. Gaya Game & Tombol Pilihan Ganda ==================== */
        #quiz-game {
            display: none;
        }
        .question-box {
            background-color: #f7f7f7; /* Krem Muda */
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 6px solid #57cc99;
            text-align: left;
            font-size: 1.1em;
            color: #22577a;
        }
        .answer-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr; /* 2 kolom untuk A, B, C, D */
            gap: 10px;
            margin-bottom: 20px;
        }
        .answer-buttons button {
            background-color: #90d4c8; /* Warna tombol Biru-Hijau Pastel */
            color: #22577a;
            border: none;
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: background-color 0.3s, transform 0.1s;
            text-align: left;
            font-family: inherit;
        }
        .answer-buttons button:hover {
            background-color: #57cc99; /* Hijau pastel lebih cerah saat dihover */
            color: white;
        }

        /* ==================== E. Gaya Hasil & Ranking ==================== */
        #result-screen {
            display: none; 
            margin-top: 20px;
        }
        #result-score {
            font-size: 3em;
            color: #e53935; /* Warna Merah untuk Skor */
            font-weight: 700;
        }
        #restart-button {
            background-color: #38a3a5;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
            font-size: 1em;
            border: none;
            font-family: inherit;
        }
        
        /* Gaya Tabel Ranking */
        #ranking-table {
            width: 100%;
            margin-top: 30px;
            border-collapse: collapse;
            font-size: 0.95em;
        }
        #ranking-table th, #ranking-table td {
            border: 1px solid #c7e9c5;
            padding: 10px;
            color: #22577a;
        }
        #ranking-table th {
            background-color: #57cc99;
            color: white;
        }
        #ranking-table tr:nth-child(even) {
            background-color: #e3f2fd; /* Biru muda pastel */
        }
        .top-rank {
            font-weight: bold;
            background-color: #ffee99 !important; /* Kuning Pastel untuk Top Rank */
            color: #22577a !important;
        }
        /* Style untuk Ranking Screen (saat diakses dari tombol) */
        #rank-only-screen {
            display: none;
        }
    </style>
</head>
<body>

<div class="quiz-container">
    <h1>Game Pembelahan Sel: Pilihan Ganda üß¨</h1>
    <p>Uji pemahamanmu tentang Mitosis, Meiosis, dan Studi Kasus! (8 Soal)</p>

    <div id="start-screen">
        <h2>Masukkan Nama Pemain</h2>
        <input type="text" id="name-input" placeholder="Nama_Absen" maxlength="20">
        <button id="start-button" onclick="startQuiz()">Mulai Game!</button>
        <br>
        <button id="view-ranking-button" onclick="promptPassword()">Lihat Peringkat Guru üèÜ</button>
    </div>

    <div id="quiz-game">
        <div class="question-box">
            <span id="question-number">Soal 1/8</span>
            <div id="question-text" style="margin-top: 10px;">Pertanyaan akan muncul di sini...</div>
        </div>
        <div class="answer-buttons">
            <button id="btn-A" onclick="checkAnswer('A')"></button>
            <button id="btn-B" onclick="checkAnswer('B')"></button>
            <button id="btn-C" onclick="checkAnswer('C')"></button>
            <button id="btn-D" onclick="checkAnswer('D')"></button>
        </div>
    </div>
    
    <div id="result-screen">
        <div id="result-text">Hasil Akhir:</div>
        <div id="result-score"></div>
        <p id="result-message"></p>
        
        <h2>üèÜ Peringkat Kelas üèÜ</h2>
        <table id="ranking-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Nama</th>
                    <th>Skor</th>
                </tr>
            </thead>
            <tbody id="ranking-body">
                </tbody>
        </table>
        
        <button id="restart-button" onclick="startGame()">Selesai / Main Lagi!</button>
    </div>

</div>

<script>
    // Data Pertanyaan Pilihan Ganda (Sudah dikoreksi)
    const questions = [
        { 
            question: "Peristiwa tersusunnya kromosom di bidang ekuator sel (lempeng metafase) adalah ciri khas fase...", 
            options: ["A. Profase", "B. Metafase", "C. Anafase", "D. Telofase"], 
            answer: "B", 
            rationale: "Tersusunnya kromosom di bidang ekuator adalah ciri khas Metafase."
        },
        { 
            question: "Jika sel induk memiliki 2n = 20 kromosom, hasil akhir mitosis adalah...", 
            options: ["A. Dua sel anakan dengan 10 kromosom (n)", "B. Dua sel anakan dengan 20 kromosom (2n)", "C. Empat sel anakan dengan 10 kromosom (n)", "D. Empat sel anakan dengan 20 kromosom (2n)"], 
            answer: "B", 
            rationale: "Mitosis menghasilkan dua sel anakan yang bersifat diploid (2n) dan identik dengan induk."
        },
        { 
            question: "Peristiwa krusial yang menandai fase Anafase pada Mitosis adalah...", 
            options: ["A. Pembentukan membran inti baru.", "B. Kromosom homolog berpasangan.", "C. Pemisahan kromatid saudara.", "D. Hilangnya membran inti."], 
            answer: "C", 
            rationale: "Anafase diawali dengan pemisahan sentromer, memisahkan kromatid saudara menjadi kromosom tunggal."
        },
        { 
            question: "Di fase manakah peristiwa 'pindah silang' (crossing over) terjadi, yang merupakan sumber utama variasi genetik?", 
            options: ["A. Profase II", "B. Metafase I", "C. Anafase II", "D. Profase I"], 
            answer: "D", 
            rationale: "Pindah silang terjadi selama Profase I, saat kromosom homolog berpasangan (sinapsis)."
        },
        { 
            question: "Pembelahan reduksi (pengurangan jumlah kromosom dari 2n menjadi n) pada meiosis terjadi pada tahap...", 
            options: ["A. Anafase II (Pemisahan kromatid saudara)", "B. Anafase I (Pemisahan kromosom homolog)", "C. Metafase II (Penyusunan kromosom tunggal)", "D. Telofase II (Pembentukan 4 sel anakan)"], 
            answer: "B", 
            rationale: "Pemisahan kromosom homolog pada Anafase I adalah peristiwa yang mengurangi jumlah kromosom sel anakan menjadi setengahnya (haploid)."
        },
        { 
            question: "Manakah yang merupakan deskripsi hasil akhir yang BENAR dari seluruh proses Meiosis?", 
            options: ["A. Dua sel, diploid, identik genetik.", "B. Empat sel, diploid, berbeda genetik.", "C. Dua sel, haploid, berbeda genetik.", "D. Empat sel, haploid, berbeda genetik."], 
            answer: "D", 
            rationale: "Meiosis menghasilkan empat sel anakan yang haploid (n) dan berbeda secara genetik karena pindah silang dan segregasi acak."
        },
        { 
            question: "Penyakit Kanker paling erat kaitannya dengan kegagalan fungsi di bagian siklus sel yang mana?", 
            options: ["A. Fase istirahat (G0) yang terlalu lama.", "B. Kegagalan titik cek (checkpoint) yang menyebabkan mitosis tidak terkontrol.", "C. Pembelahan meiosis yang terus-menerus di sel somatik.", "D. Apoptosis (kematian sel terprogram) yang berlebihan."], 
            answer: "B", 
            rationale: "Kanker disebabkan oleh kegagalan sistem kontrol yang membiarkan sel membelah (mitosis) tanpa henti."
        },
        { 
            question: "Pemulia tanaman ingin menciptakan varietas baru. Proses seluler yang memberikan variasi genetik paling banyak pada keturunan adalah...", 
            options: ["A. Mitosis pada jaringan batang.", "B. Pembelahan langsung (Amitosis) sel-sel.", "C. Meiosis dalam pembentukan sel kelamin.", "D. Duplikasi DNA pada fase S."], 
            answer: "C", 
            rationale: "Meiosis menghasilkan gamet yang unik melalui pindah silang, yang merupakan dasar dari variasi genetik pada reproduksi seksual."
        }
    ];

    // Variabel dan Fungsi JavaScript
    let currentQuestionIndex = 0;
    let score = 0;
    let playerName = '';
    // Kode Pass untuk Guru (Bisa diubah, disarankan pakai kode yang mudah diingat)
    const TEACHER_PASS = "BIOLOGI123"; 
    let rankingData = JSON.parse(localStorage.getItem('quizRankingPastel')) || []; 
    
    const startScreen = document.getElementById('start-screen');
    const quizGameScreen = document.getElementById('quiz-game');
    const resultScreen = document.getElementById('result-screen');
    const nameInput = document.getElementById('name-input');
    
    const questionTextElement = document.getElementById('question-text');
    const questionNumberElement = document.getElementById('question-number');
    const resultScoreElement = document.getElementById('result-score');
    const resultMessageElement = document.getElementById('result-message');
    const rankingBody = document.getElementById('ranking-body');
    const resultTextElement = document.getElementById('result-text');


    const btnA = document.getElementById('btn-A');
    const btnB = document.getElementById('btn-B');
    const btnC = document.getElementById('btn-C');
    const btnD = document.getElementById('btn-D');

    // ----------------------------------------------------
    // Fungsi Awal: Memuat Data dan Tampilan
    // ----------------------------------------------------

    function startGame() {
        startScreen.style.display = 'block';
        quizGameScreen.style.display = 'none';
        resultScreen.style.display = 'none';
        // Saat kembali ke start screen, tampilkan lagi elemen hasil skor kuis biasa
        resultScoreElement.style.display = 'block';
        resultMessageElement.style.display = 'block';
        resultTextElement.textContent = 'Hasil Akhir:';
        nameInput.value = '';
    }

    function startQuiz() {
        playerName = nameInput.value.trim();
        if (playerName === "") {
            alert("Mohon masukkan nama kamu untuk memulai!");
            return;
        }

        currentQuestionIndex = 0;
        score = 0;
        
        startScreen.style.display = 'none';
        quizGameScreen.style.display = 'block';
        showQuestion();
    }

    // ----------------------------------------------------
    // Fungsi Khusus Guru (View Ranking)
    // ----------------------------------------------------

    function promptPassword() {
        const inputPass = prompt("Masukkan KODE GURU untuk melihat peringkat:");
        if (inputPass === null) { // Jika user tekan 'Cancel'
            return;
        }

        if (inputPass === TEACHER_PASS) {
            viewRanking();
        } else {
            alert("‚ùå KODE SALAH! Anda tidak memiliki akses.");
        }
    }

    function viewRanking() {
        // Sembunyikan semua layar yang tidak diperlukan
        startScreen.style.display = 'none';
        quizGameScreen.style.display = 'none';
        resultScreen.style.display = 'block';

        // Sembunyikan elemen skor dan pesan yang hanya muncul setelah kuis selesai
        resultScoreElement.style.display = 'none'; 
        resultMessageElement.style.display = 'none';
        
        // Ubah Judul Hasil untuk Guru
        resultTextElement.textContent = 'Akses Guru: Data Peringkat';

        displayRanking();
    }


    // ----------------------------------------------------
    // Fungsi Game Play
    // ----------------------------------------------------

    function showQuestion() {
        if (currentQuestionIndex < questions.length) {
            const currentQ = questions[currentQuestionIndex];
            questionNumberElement.textContent = `Soal ${currentQuestionIndex + 1}/${questions.length}`;
            questionTextElement.innerHTML = currentQ.question;
            
            // Tampilkan Pilihan Jawaban pada tombol
            btnA.textContent = currentQ.options[0];
            btnB.textContent = currentQ.options[1];
            btnC.textContent = currentQ.options[2];
            btnD.textContent = currentQ.options[3];
        } else {
            showResult();
        }
    }

    function checkAnswer(userAnswer) {
        const currentQ = questions[currentQuestionIndex];
        const isCorrect = (userAnswer === currentQ.answer);

        if (isCorrect) {
            score++;
            alert("‚úÖ BENAR! Skor bertambah.");
        } else {
            alert(`‚ùå SALAH. Jawaban Benar adalah ${currentQ.answer}. Penjelasan: ${currentQ.rationale}`);
        }

        currentQuestionIndex++;
        showQuestion();
    }

    // ----------------------------------------------------
    // Fungsi Akhir: Hasil dan Ranking
    // ----------------------------------------------------

    function showResult() {
        saveScore(playerName, score);
        
        quizGameScreen.style.display = 'none';
        resultScreen.style.display = 'block';

        // Pastikan elemen skor dan pesan muncul setelah kuis biasa
        resultScoreElement.style.display = 'block';
        resultMessageElement.style.display = 'block';
        resultTextElement.textContent = 'Hasil Akhir:'; // Kembalikan judul hasil
        
        resultScoreElement.textContent = `${score}/${questions.length}`;

        let message = '';
        if (score === questions.length) {
            message = `üéâ SELAMAT ${playerName}! Sempurna! Kamu menguasai Pembelahan Sel! üåü`;
        } else if (score >= 5) {
            message = `üëç Hebat, ${playerName}! Pemahamanmu sangat bagus. Terus berlatih!`;
        } else {
            message = `‚úçÔ∏è Semangat ${playerName}! Jangan menyerah, coba pelajari lagi materinya.`;
        }
        resultMessageElement.textContent = message;
        
        displayRanking(); // Tampilkan peringkat yang sudah diperbarui
    }

    function saveScore(name, finalScore) {
        const newEntry = { name: name, score: finalScore, timestamp: Date.now() };
        rankingData.push(newEntry);
        
        rankingData.sort((a, b) => b.score - a.score); // Urutkan berdasarkan skor
        
        if (rankingData.length > 10) {
            rankingData = rankingData.slice(0, 10); // Batasi 10 besar
        }
        
        localStorage.setItem('quizRankingPastel', JSON.stringify(rankingData));
    }

    function displayRanking() {
        rankingBody.innerHTML = ''; 
        
        rankingData.forEach((entry, index) => {
            const rank = index + 1;
            const row = rankingBody.insertRow();
            
            if (rank === 1) {
                row.classList.add('top-rank');
            }
            
            row.insertCell().textContent = rank;
            row.insertCell().textContent = entry.name;
            row.insertCell().textContent = `${entry.score}/${questions.length}`;
        });
        
        if (rankingData.length === 0) {
              const row = rankingBody.insertRow();
              const cell = row.insertCell();
              cell.colSpan = 3;
              cell.textContent = "Belum ada pemain! Jadilah yang pertama!";
        }
    }

    // Mulai game saat halaman dimuat
    startGame();
</script>

</body>
</html>
